SUCCESS: config_path file exists
SUCCESS: check_config succeeded
SUCCESS: processor_path exists
SUCCESS: config input path exists
SUCCESS: config output path exists
SUCCESS: config input path is not empty
SUCCESS: num_processors is an integer greater than 0
SUCCESS: check_config_data_paths succeeded
SUCCESS: module contains a function named 'processor'
SUCCESS: check_processor succeeded
SUCCESS: create_client succeeded
SUCCESS: build_queue_image succeeded
INFO: valid requirements file
SUCCESS: make_requirements succeeded
INFO: building processor image...
===============================
===============================
#1 [internal] load build definition from Dockerfile
#1 sha256:7bd83cf0f9c4337ac05bbe00a768a5ee37e30185241b786e713509ff66362033
#1 transferring dockerfile: 335B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 sha256:416c5c31306dc1751664f134e40e278e1606499b1ea9eb7aa5d40e6ba1055860
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/python:3.10-slim-bullseye
#3 sha256:8d24f53f4189c888dd8c43ce6211c414fc4548e3dc540856fb204a8ad8295641
#3 DONE 0.0s

#4 [1/9] FROM docker.io/library/python:3.10-slim-bullseye
#4 sha256:a95083403ca41b3d99d396c3d93d9370f0e3254a1624630a6920242bf61c89c1
#4 DONE 0.0s

#10 [internal] load build context
#10 sha256:aa6dd413513d5b12b04b3c812268f2ec714593d4dab8d7ec012b2a5c717b8acf
#10 transferring context: 103B done
#10 DONE 0.0s

#7 [4/9] RUN pip install --upgrade pip setuptools
#7 sha256:0668e9a95de9e619fe6b92637b2398d893fa3bd3d302d0a15e6fe8528c25de6b
#7 CACHED

#5 [2/9] RUN apt-get update
#5 sha256:53cda8da17e63990ef6667751145a01061eef9d9e9491acbc9cb637439b1dfdf
#5 CACHED

#6 [3/9] RUN apt-get install -y build-essential
#6 sha256:8ae10628ace001b786e6d007279b2f7ca3f3640e987afdcc6debd15530b05566
#6 CACHED

#8 [5/9] RUN apt-get install -y ffmpeg
#8 sha256:e12db20afb6c69d7b9206d1e9c5fae38c46e7046166f57955b4863c179d224dc
#8 CACHED

#9 [6/9] RUN mkdir /usr/src/app
#9 sha256:30420801f82e82a186f442fac62fdd111909a75d01f85b310196fbd910779cb2
#9 CACHED

#11 [7/9] COPY requirements.txt /usr/src/app
#11 sha256:cab2d4d8f1342265a673cf335b6711e1da852be1f5755e641838ad1150e9ba4a
#11 DONE 0.0s

#12 [8/9] RUN pip install -r /usr/src/app/requirements.txt
#12 sha256:f54b597c71304ffce23de17d0b75bd838d085ba71d6e77f51cef95d51d39d6d7
#12 0.490 Collecting flask (from -r /usr/src/app/requirements.txt (line 1))
#12 0.681   Downloading Flask-2.3.2-py3-none-any.whl (96 kB)
#12 0.737      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 96.9/96.9 kB 1.7 MB/s eta 0:00:00
#12 0.826 Collecting requests (from -r /usr/src/app/requirements.txt (line 2))
#12 0.871   Downloading requests-2.31.0-py3-none-any.whl (62 kB)
#12 0.878      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 62.6/62.6 kB 12.1 MB/s eta 0:00:00
#12 0.949 Collecting pyyaml (from -r /usr/src/app/requirements.txt (line 3))
#12 0.995   Downloading PyYAML-6.0-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (733 kB)
#12 1.211      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 733.7/733.7 kB 3.4 MB/s eta 0:00:00
#12 1.286 Collecting transformers (from -r /usr/src/app/requirements.txt (line 4))
#12 1.329   Downloading transformers-4.29.2-py3-none-any.whl (7.1 MB)
#12 2.315      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 7.1/7.1 MB 7.2 MB/s eta 0:00:00
#12 2.374 Collecting accelerate (from -r /usr/src/app/requirements.txt (line 5))
#12 2.411   Downloading accelerate-0.19.0-py3-none-any.whl (219 kB)
#12 2.438      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 219.1/219.1 kB 8.2 MB/s eta 0:00:00
#12 2.561 Collecting moviepy (from -r /usr/src/app/requirements.txt (line 6))
#12 2.601   Downloading moviepy-1.0.3.tar.gz (388 kB)
#12 2.647      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 388.3/388.3 kB 9.4 MB/s eta 0:00:00
#12 2.680   Preparing metadata (setup.py): started
#12 2.830   Preparing metadata (setup.py): finished with status 'done'
#12 2.897 Collecting torch (from -r /usr/src/app/requirements.txt (line 7))
#12 2.940   Downloading torch-2.0.1-cp310-cp310-manylinux2014_aarch64.whl (74.0 MB)
#12 6.457      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 74.0/74.0 MB 15.2 MB/s eta 0:00:00
#12 6.605 Collecting Werkzeug>=2.3.3 (from flask->-r /usr/src/app/requirements.txt (line 1))
#12 6.664   Downloading Werkzeug-2.3.4-py3-none-any.whl (242 kB)
#12 6.681      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 242.5/242.5 kB 15.5 MB/s eta 0:00:00
#12 6.729 Collecting Jinja2>=3.1.2 (from flask->-r /usr/src/app/requirements.txt (line 1))
#12 6.766   Downloading Jinja2-3.1.2-py3-none-any.whl (133 kB)
#12 6.778      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 133.1/133.1 kB 12.8 MB/s eta 0:00:00
#12 6.820 Collecting itsdangerous>=2.1.2 (from flask->-r /usr/src/app/requirements.txt (line 1))
#12 6.854   Downloading itsdangerous-2.1.2-py3-none-any.whl (15 kB)
#12 6.907 Collecting click>=8.1.3 (from flask->-r /usr/src/app/requirements.txt (line 1))
#12 6.943   Downloading click-8.1.3-py3-none-any.whl (96 kB)
#12 6.955      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 96.6/96.6 kB 11.8 MB/s eta 0:00:00
#12 7.003 Collecting blinker>=1.6.2 (from flask->-r /usr/src/app/requirements.txt (line 1))
#12 7.038   Downloading blinker-1.6.2-py3-none-any.whl (13 kB)
#12 7.148 Collecting charset-normalizer<4,>=2 (from requests->-r /usr/src/app/requirements.txt (line 2))
#12 7.191   Downloading charset_normalizer-3.1.0-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (195 kB)
#12 7.206      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 195.9/195.9 kB 14.7 MB/s eta 0:00:00
#12 7.254 Collecting idna<4,>=2.5 (from requests->-r /usr/src/app/requirements.txt (line 2))
#12 7.291   Downloading idna-3.4-py3-none-any.whl (61 kB)
#12 7.303      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 61.5/61.5 kB 9.0 MB/s eta 0:00:00
#12 7.367 Collecting urllib3<3,>=1.21.1 (from requests->-r /usr/src/app/requirements.txt (line 2))
#12 7.402   Downloading urllib3-2.0.2-py3-none-any.whl (123 kB)
#12 7.416      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 123.2/123.2 kB 9.4 MB/s eta 0:00:00
#12 7.467 Collecting certifi>=2017.4.17 (from requests->-r /usr/src/app/requirements.txt (line 2))
#12 7.504   Downloading certifi-2023.5.7-py3-none-any.whl (156 kB)
#12 7.521      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 157.0/157.0 kB 9.4 MB/s eta 0:00:00
#12 7.772 Collecting filelock (from transformers->-r /usr/src/app/requirements.txt (line 4))
#12 7.808   Downloading filelock-3.12.0-py3-none-any.whl (10 kB)
#12 7.861 Collecting huggingface-hub<1.0,>=0.14.1 (from transformers->-r /usr/src/app/requirements.txt (line 4))
#12 7.912   Downloading huggingface_hub-0.14.1-py3-none-any.whl (224 kB)
#12 7.926      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 224.5/224.5 kB 19.2 MB/s eta 0:00:00
#12 8.125 Collecting numpy>=1.17 (from transformers->-r /usr/src/app/requirements.txt (line 4))
#12 8.191   Downloading numpy-1.24.3-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (14.0 MB)
#12 8.912      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 14.0/14.0 MB 19.9 MB/s eta 0:00:00
#12 8.975 Collecting packaging>=20.0 (from transformers->-r /usr/src/app/requirements.txt (line 4))
#12 9.010   Downloading packaging-23.1-py3-none-any.whl (48 kB)
#12 9.017      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 48.9/48.9 kB 22.2 MB/s eta 0:00:00
#12 9.354 Collecting regex!=2019.12.17 (from transformers->-r /usr/src/app/requirements.txt (line 4))
#12 9.399   Downloading regex-2023.5.5-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (768 kB)
#12 9.436      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 769.0/769.0 kB 21.7 MB/s eta 0:00:00
#12 9.568 Collecting tokenizers!=0.11.3,<0.14,>=0.11.1 (from transformers->-r /usr/src/app/requirements.txt (line 4))
#12 9.611   Downloading tokenizers-0.13.3-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (7.5 MB)
#12 10.16      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 7.5/7.5 MB 13.5 MB/s eta 0:00:00
#12 10.25 Collecting tqdm>=4.27 (from transformers->-r /usr/src/app/requirements.txt (line 4))
#12 10.30   Downloading tqdm-4.65.0-py3-none-any.whl (77 kB)
#12 10.31      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 77.1/77.1 kB 4.7 MB/s eta 0:00:00
#12 10.44 Collecting psutil (from accelerate->-r /usr/src/app/requirements.txt (line 5))
#12 10.50   Downloading psutil-5.9.5.tar.gz (493 kB)
#12 10.53      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 493.5/493.5 kB 15.7 MB/s eta 0:00:00
#12 10.57   Installing build dependencies: started
#12 11.60   Installing build dependencies: finished with status 'done'
#12 11.60   Getting requirements to build wheel: started
#12 11.75   Getting requirements to build wheel: finished with status 'done'
#12 11.75   Preparing metadata (pyproject.toml): started
#12 11.88   Preparing metadata (pyproject.toml): finished with status 'done'
#12 11.94 Collecting decorator<5.0,>=4.0.2 (from moviepy->-r /usr/src/app/requirements.txt (line 6))
#12 12.00   Downloading decorator-4.4.2-py2.py3-none-any.whl (9.2 kB)
#12 12.06 Collecting proglog<=1.0.0 (from moviepy->-r /usr/src/app/requirements.txt (line 6))
#12 12.10   Downloading proglog-0.1.10-py3-none-any.whl (6.1 kB)
#12 12.18 Collecting imageio<3.0,>=2.5 (from moviepy->-r /usr/src/app/requirements.txt (line 6))
#12 12.22   Downloading imageio-2.30.0-py3-none-any.whl (312 kB)
#12 12.25      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 312.7/312.7 kB 13.5 MB/s eta 0:00:00
#12 12.32 Collecting imageio_ffmpeg>=0.2.0 (from moviepy->-r /usr/src/app/requirements.txt (line 6))
#12 12.36   Downloading imageio_ffmpeg-0.4.8-py3-none-manylinux2014_aarch64.whl (22.9 MB)
#12 13.49      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 22.9/22.9 MB 18.3 MB/s eta 0:00:00
#12 13.55 Collecting typing-extensions (from torch->-r /usr/src/app/requirements.txt (line 7))
#12 13.59   Downloading typing_extensions-4.6.2-py3-none-any.whl (31 kB)
#12 13.64 Collecting sympy (from torch->-r /usr/src/app/requirements.txt (line 7))
#12 13.67   Downloading sympy-1.12-py3-none-any.whl (5.7 MB)
#12 14.03      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 5.7/5.7 MB 16.1 MB/s eta 0:00:00
#12 14.13 Collecting networkx (from torch->-r /usr/src/app/requirements.txt (line 7))
#12 14.16   Downloading networkx-3.1-py3-none-any.whl (2.1 MB)
#12 14.29      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 17.1 MB/s eta 0:00:00
#12 14.38 Collecting fsspec (from huggingface-hub<1.0,>=0.14.1->transformers->-r /usr/src/app/requirements.txt (line 4))
#12 14.41   Downloading fsspec-2023.5.0-py3-none-any.whl (160 kB)
#12 14.43      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 160.1/160.1 kB 18.4 MB/s eta 0:00:00
#12 14.63 Collecting pillow>=8.3.2 (from imageio<3.0,>=2.5->moviepy->-r /usr/src/app/requirements.txt (line 6))
#12 14.67   Downloading Pillow-9.5.0-cp310-cp310-manylinux_2_28_aarch64.whl (3.2 MB)
#12 14.86      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.2/3.2 MB 17.6 MB/s eta 0:00:00
#12 14.94 Collecting MarkupSafe>=2.0 (from Jinja2>=3.1.2->flask->-r /usr/src/app/requirements.txt (line 1))
#12 14.97   Downloading MarkupSafe-2.1.2-cp310-cp310-manylinux_2_17_aarch64.manylinux2014_aarch64.whl (26 kB)
#12 15.07 Collecting mpmath>=0.19 (from sympy->torch->-r /usr/src/app/requirements.txt (line 7))
#12 15.11   Downloading mpmath-1.3.0-py3-none-any.whl (536 kB)
#12 15.15      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 536.2/536.2 kB 13.3 MB/s eta 0:00:00
#12 15.20 Building wheels for collected packages: moviepy, psutil
#12 15.20   Building wheel for moviepy (setup.py): started
#12 15.38   Building wheel for moviepy (setup.py): finished with status 'done'
#12 15.38   Created wheel for moviepy: filename=moviepy-1.0.3-py3-none-any.whl size=110730 sha256=6f1c34391212df49f0a444d63bbadd0e86615e2182ff6e4be6b04d1f91ae6185
#12 15.38   Stored in directory: /root/.cache/pip/wheels/96/32/2d/e10123bd88fbfc02fed53cc18c80a171d3c87479ed845fa7c1
#12 15.38   Building wheel for psutil (pyproject.toml): started
#12 16.11   Building wheel for psutil (pyproject.toml): finished with status 'done'
#12 16.11   Created wheel for psutil: filename=psutil-5.9.5-cp310-abi3-linux_aarch64.whl size=283857 sha256=77aff0f075282945443821d01df54c2fa908178313cced4d9b63660b488ff1ae
#12 16.11   Stored in directory: /root/.cache/pip/wheels/1f/3a/db/ba9717f3efd7f8da8910eca12dc9cd15d404035397af627e7c
#12 16.12 Successfully built moviepy psutil
#12 16.53 Installing collected packages: tokenizers, mpmath, urllib3, typing-extensions, tqdm, sympy, regex, pyyaml, psutil, pillow, packaging, numpy, networkx, MarkupSafe, itsdangerous, imageio_ffmpeg, idna, fsspec, filelock, decorator, click, charset-normalizer, certifi, blinker, Werkzeug, requests, proglog, Jinja2, imageio, torch, moviepy, huggingface-hub, flask, transformers, accelerate
#12 28.75 Successfully installed Jinja2-3.1.2 MarkupSafe-2.1.2 Werkzeug-2.3.4 accelerate-0.19.0 blinker-1.6.2 certifi-2023.5.7 charset-normalizer-3.1.0 click-8.1.3 decorator-4.4.2 filelock-3.12.0 flask-2.3.2 fsspec-2023.5.0 huggingface-hub-0.14.1 idna-3.4 imageio-2.30.0 imageio_ffmpeg-0.4.8 itsdangerous-2.1.2 moviepy-1.0.3 mpmath-1.3.0 networkx-3.1 numpy-1.24.3 packaging-23.1 pillow-9.5.0 proglog-0.1.10 psutil-5.9.5 pyyaml-6.0 regex-2023.5.5 requests-2.31.0 sympy-1.12 tokenizers-0.13.3 torch-2.0.1 tqdm-4.65.0 transformers-4.29.2 typing-extensions-4.6.2 urllib3-2.0.2
#12 28.75 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#12 DONE 30.1s

#13 [9/9] RUN rm -r /usr/src/app
#13 sha256:933cd0eebc7218c2aacb2faa3be363475c4463e20c00aecc81fbfd8651b62949
#13 DONE 0.2s

#14 exporting to image
#14 sha256:e8c613e07b0b7ff33893b694f7759a10d42e180f2b4dc349fb57dc6b71dcab00
#14 exporting layers
#14 exporting layers 2.1s done
#14 writing image sha256:52cf624aff11ea14c34a7fcdb220447f402a3afa550e60145f2e75c15431d7f2 done
#14 naming to docker.io/library/quick_batch_processor_app done
#14 DONE 2.1s
SUCCESS: Image build completed successfully!
===============================
===============================
INFO: ... processor image build completed!
SUCCESS: build_processor_image succeeded
SUCCESS: setup_client succeeded
SUCCESS: remove_all_services succeeded
SUCCESS: remove_all_containers succeeded
SUCCESS: remove_network succeeded
SUCCESS: leave_swarm succeeded
SUCCESS: reset_workspace succeeded
SUCCESS: create_swarm succeeded
SUCCESS: create_network succeeded
SUCCESS: remove_service succeeded
SUCCESS: create_queue_service succeeded
SUCCESS: queue_app service is running.
SUCCESS: monitor_queue_app_containers succeeded
SUCCESS: remove_service succeeded
SUCCESS: create_processor_service succeeded
SUCCESS: setup_workspace succeeded
SUCCESS: scaleup_processor_service succeeded
current feed_queue_length:  4
current feed_queue_length:  4
current feed_queue_length:  4
current feed_queue_length:  3
current feed_queue_length:  3
current feed_queue_length:  3
current feed_queue_length:  3
current feed_queue_length:  2
current feed_queue_length:  2
current feed_queue_length:  2
current feed_queue_length:  2
current feed_queue_length:  2
current feed_queue_length:  1
current feed_queue_length:  1
current feed_queue_length:  1
current feed_queue_length:  0
SUCCESS: feed_queue_length is 0, stopping services...
SUCCESS: remove_all_services succeeded
SUCCESS: remove_all_containers succeeded
SUCCESS: remove_network succeeded
SUCCESS: monitor_queue succeeded
